========================================
BUG-ID: AUTH-VALIDATION-004
SUMMARY:
API позволяет создать несколько пользователей с одним и тем же email-адресом, различающимся только регистром символов. Email должен быть case-insensitive согласно RFC 5322, но система создает дубликаты пользователей.

ENVIRONMENT:
Local Docker nanoreddit
Endpoint: /api/v1/auth/register

PRECONDITIONS:
В системе зарегистрирован пользователь с определенным email-адресом

STEPS TO REPRODUCE:
1. Зарегистрировать пользователя с произвольным email-адресом
2. Выполнить повторную регистрацию с тем же email-адресом, но в другом регистре (например, изменить строчные буквы на прописные в локальной части)
3. Проверить результат операции и состояние базы данных

EXPECTED RESULT:
- При попытке регистрации с email-адресом, отличающимся только регистром от существующего, API должен возвращать ошибку о том, что email уже используется
- В базе данных должен сохраняться только один пользователь для каждого уникального email-адреса (без учета регистра)

ACTUAL RESULT:
API успешно создает несколько пользователей с одинаковыми email-адресами, различающимися только регистром символов
В базе данных создаются два разных пользователя с одним и тем же email, различающимся только регистром.
Нарушается принцип уникальности email-адреса.

SEVERITY:
Major

PRIORITY:
P2

NOTES:
Email-адреса по стандарту RFC 5322 должны обрабатываться как case-insensitive. Система должна нормализовать email (например, приводить к нижнему регистру) перед проверкой уникальности и сохранением в базу данных. Это критический баг, так как позволяет создавать дубликаты пользователей и может привести к проблемам с авторизацией и нарушению бизнес-логики приложения
========================================